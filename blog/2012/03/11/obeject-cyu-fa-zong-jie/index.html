
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Obeject-C语法总结 - MosquitoLiu's Blog</title>
	<meta name="author" content="小文">

	
	<meta name="description" content="Objective-C代码的文件扩展名
扩展名 内容类型
.h 头文件。头文件包含类，类型，函数和常数的声明。
.m 源代码文件。这是典型的源代码文件扩展名，可以包含Objective-C和C代码。
.mm 源代码文件。带有这种扩展名的源代码文件，除了可以包含Objective- &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="MosquitoLiu's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">MosquitoLiu's Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About Me</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About Me</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:blog.mosquitoliu.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		<a class="facebook" href="http://www.facebook.com/freefishdss" title="Facebook">Facebook</a>
		
		
		<a class="google" href="https://plus.google.com/104655963617046039162?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/mosquitoliu8023" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/MosqutitoLiu" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:blog.mosquitoliu.com">
	</form>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/mosquitoliu8023">mosquitoliu8023</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('mosquitoliu8023', 4, true);
	})(jQuery);
</script>

	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Obeject-C语法总结</h2>
	<div class="entry-content"><p>Objective-C代码的文件扩展名<br />
扩展名   内容类型<br />
.h  头文件。头文件包含类，类型，函数和常数的声明。<br />
.m  源代码文件。这是典型的源代码文件扩展名，可以包含Objective-C和C代码。<br />
.mm 源代码文件。带有这种扩展名的源代码文件，除了可以包含Objective-C和C代码以外还可以包含C++代码。仅在你的Objective-C代码中确实需要使用C++类或者特性的时候才用这种扩展名。<br />
#import选项和#include选项完全相同，＃import只是它可以确保相同的文件只会被包含一次。</p>


<p>字符串<br />
NSString*  myString = @&#8221;My String&#8221;;<br />
用双引号，助记符号  @<!--more--></p>


<p>类<br />
类是Objective-C用来封装数据，以及操作数据的行为的基础结构。对象就是类的运行期间实例，它包含了类声明的实例变量自己的内存拷贝，以及类成员的指针。Objective-C的类规格说明包含了两个部分：接口和实现。接口部分包含了类声明和实例变量的定义，以及类相关的方法。实现部分包含了类方法的实际代码<br />
￼</p>


<p>类声明总是由@interface编译选项开始，由@end编译选项结束。类名之后的（用冒号分隔的）是父类的名字。类的实例（或者成员）变量声明在被大括号包含的代码块中。实例变量块后面就是类声明的方法的列表。每个实例变量和方法声明都以分号结尾。<br />
类实现<br />
类实现总是由@implementation开始，由@end编译选项结束。<br />
+(MyClass *)createMyClassWithString: (NSString *) aName<br />
类方法<br />
-(id)initWithString:(NSString *) aName<br />
实例方法<br />
Objective-C中的类可以声明两种类型的方法：实例方法和类方法。实例方法就是一个方法，它在类的一个具体实例的范围内执行。也就是说，在你调用一个实例方法前，你必须首先创建类的一个实例。而类方法，比较起来，也就是说，不需要你创建一个实例。</p>


<p>￼</p>


<p>方法实际的名字包含了冒号，冒号表明了参数的出现。<br />
[myArray insertObject:anObj atIndex:0];<br />
接收消息的对象在左边，消息（包括消息需要的任何参数）在右边。<br />
[[myAppObject getArray] insertObject:[myAppObject getObjectToInsert] atIndex:0];<br />
消息的嵌套</p>


<p>NSMutableArray*   myArray = nil;    // nil is essentially the same as NULL<br />
// Create a new array and assign it to the myArray variable.<br />
myArray = [NSMutableArray arrayWithCapacity:0];<br />
类方法</p>


<p>属性<br />
属性是用来代替声明存取方法的便捷方式。属性不会在你的类声明中创建一个新的实例变量。他们仅仅是定义方法访问已有的实例变量的速记方式而已。<br />
实际上可以说，属性节约了你必须要些的大量多余的代码。因为大多数存取方法都是用类似的方式实现的，你用属性声明指定你希望的行为，然后在编译期间合成基于声明的实际的getter和setter方法。<br />
属性声明应该放在类接口的方法声明那里。基本的定义使用@property编译选项，紧跟着类型信息和属性的名字。你还可以用定制选项对属性进行配置，这决定了存取方法的行为。下面的例子展示了一些简单的属性声明：<br />
@property BOOL flag;<br />
@property (copy) NSString* nameObject;  // Copy the object during assignment.<br />
@property (readonly) UIView* rootView;  // Create only a getter method.</p>


<p>property是一种代码生成机制，能够生成不同类型的getter／setter函数，特别是如果你想要用点（.）操作符号来存取变量的话，你就能必须使用property。<br />
@s</p>


<p>用法如：@property (attribute1,attribute2) float value;</p>


<p>这些attribute包括：<br />
readonly－只读，只能读取而不能设定值（不能用setXXXX的函式）。<br />
readwrite－可读可写（默认）。<br />
assign－在设值时替换新旧变量（默认）。<br />
retain－在设值时retain新的变量，release旧变量。<br />
copy－在设值时copy一份新变量，release旧变量。<br />
nonatomic－默认為atomic。<br />
前两个只是简单的设定变量的可读写性。</p>


<p>assign只是简单的替换变量，通常运用在标量类型上，例如：NSInterger和CGRect,<br />
或者(在引用计数环境)为那些你不拥有的对象，例如：delegates。<br />
在垃圾收集环境下retain 和 assign实际上是相同的。<br />
它的产生的setter代码內容类似：<br />
retain通常用在对象类型上</p>


<p>使用retain会通知编译器对新的变量发送保留（retain）的信息，以确保变量在程序支行时不会从记忆体中被清除。</p>


<p>copy也是通常用在必须是已经实现NSCopying协议的对象类型上，只是把刚刚retain的地方改成copy，在设定时不retain新的变量，而是copy一份給原变量成員。<br />
通常在新变量為mutable而原变量為immutable时使用，使用copy可以确保原变量仍是immutable。</p>


<p>变量和属性是不同的，属性是建立在变量的基础上的，但是实际上它是方法。<br />
把slef.teststring_B = foo; 转化成[self setTeststring_B:foo]。</p>


<p>property实现的指令有两个：@synthesize和@dynamic</p>


<p>@synthesize 自动生成setter&gettter方法，但也是允许覆盖的.<br />
当你想要让getter或setter做更多的事情或加入新的特性时，就要用@dynamic，这时再用原来的@synthesize覆盖的话，会有警告，然后运行时如果你想用到新加入的特性时，运行会出错<br />
使用@dynamic关键字来告诉编译器，你将通过属性暗示或者直接用方法实现或在运行时使用诸如代码动态加载或其动态方法解析机制来履行此API的约定。<br />
它会抑制编译器在不能找到合适的实现时生成的警告。当您知道该方法将在运行时可用时，就可以使用它。</p>


<p>nonatomic，刚是与多线程有关。默认为atomic是在multi-thread的环境下才会用到。<br />
在一般iPhone开发上，会设定为nonatomic来提高效率。<br />
 atomic的意思就是setter/getter这个函数是一个原语操作。如果有多个线程同时调用setter的话，不会出现某一个线程执行setter全部语句之前，另一个线程开始执行setter情况，相当于函数头尾加了锁一样。<br />
nonatomic不保证setter/getter的原语行，所以你可能会取到不完整的东西。</p>


<p>比如setter函数里面改变两个成员变量，如果你用nonatomic的话，getter可能会取到只更改了其中一个变量时候的状态，这样取到的东西会有问题<br />
还有一点非常要注意的就是，在使用property时一定要在前面带上self(如：self.xxx),如果你不这样做，容易造成内存<br />
泄漏。</p>


<p>协议和代理<br />
协议声明了可以被任何类实现的方法。他们仅是定义一个接口，其他的对象去负责实现。你实现了协议里面的方法，就叫做符合协议。<br />
在iPhone OS中协议常用来实现委托对象。委托对象就是一个对象以其他的对象的模式行事。<br />
UIApplication类实现了一个程序需要的行为。<br />
协议的声明跟类接口的声明很像，只是协议没有父类，而且他们不会定义任何实例变量。有一个方法的协议声明：<br />
@protocol MyProtocol<br />
- (void)myProtocolMethod;<br />
@end</p>


<p>数据类型</p>


<p>1、 id：</p>


<p>Objective-C有一种比较特殊的数据类型是id。你可以把它理解为“随便”。</p>


<p>在Objective-C里，一切东西都是指针形式保存，你获取到的就是这个对象在内存的位置。那么id就是你知道这个位置，但是不知道里面是啥的时候的写法。</p>


<p>2、 同一个数组可以保存不同的对象：<br />
 3、BOOL，YES，NO：<br />
你可以认为YES表示C#里的true，NO表示false。而实际上YES是1，NO是0，BOOL本身就是个char</p>


<p>4、IBOutlet、IBAction<br />
IBOutlet就是一个显式的引用访问标记。<br />
IBAction就是一个方法的显式引用标记。 IBOutlet声明插座变量，IBAction声明事件方法，其实可理解为void，只是告诉编译器这些变量和方法是和View上的东东打交道的<br />
IBOutlet是控件的引用，比如我想在程序中对控件进行操作，那么就需要将控件声明为IBOutlet。IBAction是控件要执行的动作或事件</p>


<p>官方对IBAction和IBOutlet的解释   </p>


<p>Interface Builder Constants</p>


<p>Type qualifiers used by Interface Builder to synchronize with Xcode.<br />
#define IBAction void<br />
#define IBOutlet</p>


<p>Constants<br />
IBActionType qualifier used by Interface Builder to synchronize actions. Use this type as the return type of any action methods defined in your project. For examples of how to use this identifier, see Xcode Integration.<br />
Available in iPhone OS 2.0 and later.<br />
Declared in UINibDeclarations.h.</p>


<p>IBOutletIdentifier used to qualify an instance-variable declaration so that Interface Builder can synchronize the display and connection of outlets with Xcode. Insert this identifier immediately before the variable type in any variable declarations. For examples, including how to use it with the @property syntax, see Xcode Integration.<br />
Available in iPhone OS 2.0 and later.<br />
Declared in UINibDeclarations.h.<br />
Discussion<br />
For more information about how to use these constants, see Communicating With Objects. For information about defining and using actions and outlets in Interface Builder, see Interface Builder User Guide.</p>


<p>5、nil。</p>


<p>Objective-C里的NULL（空）就这么写，表示空指针。</p>

</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-03-11T17:50:00+08:00" pubdate data-updated="true">Mar 11<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/object-c/'>Object-C</a>, <a class='category' href='/blog/categories/study/'>Study</a>


</div>
	
	<div class="comments"><a href="#disqus_thread">Comments</a></div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
		
		
	</div>
	
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    小文

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'mosquitoliu';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://blog.mosquitoliu.com/blog/2012/03/11/obeject-cyu-fa-zong-jie/';
        var disqus_url = 'http://blog.mosquitoliu.com/blog/2012/03/11/obeject-cyu-fa-zong-jie/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-30763840-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>